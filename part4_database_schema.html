<h2>Part 4 ‚Äì Database Schema (<code>schema.sql</code>)</h2>
<p><em>From the ‚ÄúFull-Stack Annotated Study Guide: Game Catalogue PWA (SQLite + Node.js + HTML/CSS/JS)‚Äù</em></p>
<hr>
<h3>üéØ Goal</h3>
<p>This SQL script defines the <strong>structure</strong> of your SQLite database ‚Äî the <em>blueprint</em> for how data is stored, related, and retrieved.</p>
<p>üí° <strong>Analogy:</strong>
Think of the database schema like a <strong>blueprint for a library</strong> ‚Äî
each <code>CREATE TABLE</code> builds a new bookshelf, and each <code>FOREIGN KEY</code> defines how shelves relate.</p>
<hr>
<h3>Complete Annotated SQL Schema</h3>
<pre><code class="language-sql">-- ======================================================
--  schema.sql ‚Äì Database design for Game Catalogue PWA
-- ======================================================

-- ----------------------------
-- 1Ô∏è  Drop old tables if they exist (for clean rebuilds)
-- ----------------------------
DROP TABLE IF EXISTS games;
DROP TABLE IF EXISTS genres;
DROP TABLE IF EXISTS platforms;

-- üí° Note:
-- This ensures you can re-run schema.sql multiple times without duplicate errors.

-- ----------------------------
-- 2Ô∏è  Create Genres Table
-- ----------------------------
CREATE TABLE genres (
    id INTEGER PRIMARY KEY AUTOINCREMENT,  -- unique ID for each genre
    name TEXT NOT NULL UNIQUE               -- genre name (must be unique)
);

--  Example Data:
-- (1, &#39;Action&#39;), (2, &#39;Adventure&#39;), (3, &#39;RPG&#39;), (4, &#39;Puzzle&#39;)

-- ----------------------------
-- 3Ô∏è  Create Platforms Table
-- ----------------------------
CREATE TABLE platforms (
    id INTEGER PRIMARY KEY AUTOINCREMENT,  -- unique ID
    name TEXT NOT NULL UNIQUE              -- e.g., &#39;PC&#39;, &#39;PlayStation&#39;, &#39;Xbox&#39;, &#39;Switch&#39;
);

-- ----------------------------
-- 4Ô∏è  Create Games Table
-- ----------------------------
CREATE TABLE games (
    id INTEGER PRIMARY KEY AUTOINCREMENT,  -- unique ID for each game
    title TEXT NOT NULL,                   -- game title
    release_year INTEGER,                  -- release year (e.g., 2020)
    genre_id INTEGER,                      -- link to genres table
    platform_id INTEGER,                   -- link to platforms table
    developer TEXT,                        -- studio/developer name
    rating REAL,                           -- decimal rating (e.g., 8.5)
    FOREIGN KEY (genre_id) REFERENCES genres(id),      -- relationship to genres
    FOREIGN KEY (platform_id) REFERENCES platforms(id) -- relationship to platforms
);

--  Note:
-- FOREIGN KEY creates a link between tables.
-- Example: ‚ÄúThe Witcher 3‚Äù (games) belongs to genre_id=3 (‚ÄúRPG‚Äù in genres table).

-- ----------------------------
-- 5Ô∏è  Insert Sample Data
-- ----------------------------

--  Genres
INSERT INTO genres (name) VALUES
(&#39;Action&#39;),
(&#39;Adventure&#39;),
(&#39;RPG&#39;),
(&#39;Puzzle&#39;),
(&#39;Sports&#39;);

--  Tip:
-- Use plural table names for consistency. Each row = one record in that category.

--  Platforms
INSERT INTO platforms (name) VALUES
(&#39;PC&#39;),
(&#39;PlayStation&#39;),
(&#39;Xbox&#39;),
(&#39;Nintendo Switch&#39;);

--  Games
INSERT INTO games (title, release_year, genre_id, platform_id, developer, rating)
VALUES
(&#39;The Witcher 3: Wild Hunt&#39;, 2015, 3, 1, &#39;CD Projekt Red&#39;, 9.8),
(&#39;God of War&#39;, 2018, 1, 2, &#39;Santa Monica Studio&#39;, 9.6),
(&#39;Halo Infinite&#39;, 2021, 1, 3, &#39;343 Industries&#39;, 8.4),
(&#39;Animal Crossing: New Horizons&#39;, 2020, 4, 4, &#39;Nintendo&#39;, 9.0),
(&#39;FIFA 22&#39;, 2021, 5, 1, &#39;EA Sports&#39;, 7.8);

--  Pro Tip:
-- You can add more sample data easily with the same syntax.
</code></pre>
<hr>
<h3>üß©  Key Concepts Explained</h3>
<table>
<thead>
<tr>
<th>Concept</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Table</strong></td>
<td>A structured collection of related data (like a spreadsheet)</td>
</tr>
<tr>
<td><strong>Primary Key (PK)</strong></td>
<td>Unique ID for each record (auto-incremented number)</td>
</tr>
<tr>
<td><strong>Foreign Key (FK)</strong></td>
<td>Links a record to another table‚Äôs primary key</td>
</tr>
<tr>
<td><strong>NOT NULL</strong></td>
<td>Field must contain a value (no blanks)</td>
</tr>
<tr>
<td><strong>UNIQUE</strong></td>
<td>No two records can have the same value in that column</td>
</tr>
<tr>
<td><strong>AUTOINCREMENT</strong></td>
<td>Automatically generates the next available ID</td>
</tr>
</tbody></table>
<p>üí° <strong>Tip:</strong>
SQLite allows you to explore the schema interactively:</p>
<pre><code class="language-sql">.schema games       -- shows structure of the games table
</code></pre>
<hr>
<h3>Example Query Output</h3>
<p>After running this schema, if you query:</p>
<pre><code class="language-sql">SELECT title, release_year, name AS genre
FROM games
JOIN genres ON games.genre_id = genres.id;
</code></pre>
<p>You‚Äôll get something like:</p>
<table>
<thead>
<tr>
<th>title</th>
<th>release_year</th>
<th>genre</th>
</tr>
</thead>
<tbody><tr>
<td>The Witcher 3: Wild Hunt</td>
<td>2015</td>
<td>RPG</td>
</tr>
<tr>
<td>God of War</td>
<td>2018</td>
<td>Action</td>
</tr>
<tr>
<td>Halo Infinite</td>
<td>2021</td>
<td>Action</td>
</tr>
</tbody></table>
<hr>
<h3>üß™ How to Run schema.sql</h3>
<p>Inside your project directory:</p>
<pre><code class="language-bash">cd database
sqlite3 games.db &lt; schema.sql
</code></pre>
<p>‚úÖ This command:</p>
<ul>
<li>Opens (or creates) <code>games.db</code></li>
<li>Runs every SQL statement in <code>schema.sql</code></li>
<li>Populates the database with tables and sample data</li>
</ul>
<p>To verify:</p>
<pre><code class="language-bash">sqlite3 games.db
.tables              # lists all tables
SELECT * FROM games; # view inserted records
</code></pre>
<hr>
<h3>‚úÖ Outcome</h3>
<p>After executing this script, you now have:</p>
<ul>
<li>3 tables (<code>games</code>, <code>genres</code>, <code>platforms</code>)</li>
<li>Proper relationships via foreign keys</li>
<li>Example records ready for backend queries</li>
</ul>
